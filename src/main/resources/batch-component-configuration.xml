<?xml version="1.0" encoding="UTF-8"?>
<component-configuration
    xmlns="http://tis.co.jp/nablarch/component-configuration"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://tis.co.jp/nablarch/component-configuration  ./component-configuration.xsd">

  <!-- バッチ用コンフィグファイル -->
  <config-file file="batch/batch.config" />
  <!-- データベース接続設定 -->
  <config-file file="db.config" />

  <!--
  共通設定の読み込み
  -->
  <!-- 日付関連設定 -->
  <import file="common/date.xml" />
  <!-- メッセージ設定 -->
  <import file="common/message.xml" />
  <!-- ID採番設定 -->
  <import file="common/idgenerator.xml" />
  <!-- コード設定 -->
  <import file="common/code.xml" />
  <!-- 排他制御設定 -->
  <import file="common/exclusiveControl.xml" />
  <!-- バリデーション設定 -->
  <import file="common/validation.xml" />
  <!-- ワークフロー設定 -->
  <import file="common/workflow-schema.xml" />
  <import file="common/workflow.xml" />

  <!--
  バッチ固有の設定読み込み
  -->
  <!-- データベース設定-->
  <import file="batch/db.xml" />
  <!-- ハンドラ設定 -->
  <import file="batch/handler.xml" />

  <!-- 初期化が必要なコンポーネント -->
  <component name="initializer"
      class="nablarch.core.repository.initialization.BasicApplicationInitializer">
    <property name="initializeList">
      <list>
        <!-- common/message.xml:文字列リソースのキャッシュ -->
        <component-ref name="stringResourceCache" />
        <!-- common/validation.xml:バリデーション情報のキャッシュ -->
        <component-ref name="formDefinitionCache" />
        <!-- common/validation.xml:バリデーション -->
        <component-ref name="validationManager" />
        <!-- common/date.xml:業務日付コンポーネント -->
        <component-ref name="businessDateProvider" />
        <!-- common/code.xml:コードのローダ -->
        <component-ref name="codeLoader" />
        <!-- common/code.xml:コードのキャッシュ -->
        <component-ref name="codeCache" />
        <!-- batch/handler/processStop.xml:処理停止ハンドラ -->
        <component-ref name="processStopHandler" />
        <!-- batch/handler/duplicateProcessCheck:２重起動防止ハンドラ -->
        <component-ref name="duplicateProcessChecker" />
        <!--  common/workflow.xml:ワークフローのDAO -->
        <component-ref name="workflowInstanceDao" />
        <!--  common/workflow.xml:ワークフローの定義ホルダー -->
        <component-ref name="workflowDefinitionHolder" />
      </list>
    </property>
  </component>
</component-configuration>

