<?xml version="1.0" encoding="UTF-8"?>
<component-configuration
        xmlns="http://tis.co.jp/nablarch/component-configuration"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://tis.co.jp/nablarch/component-configuration ./component-configuration.xsd">

  <config-file file="db.config"/>
  <config-file file="test.config" />

  <!-- mainの設定情報を読み込み -->
  <import file="web-component-configuration.xml"/>
  <!-- HTTPリクエスト単体テスト用の設定情報を読み込み -->
  <import file="httprequesttest/http-test-configuration.xml"/>

  <!-- mainの設定情報からの差分を読み込み -->
  <import file="override.xml"/>

  <!-- テストプロジェクトの共通設定 -->
  <import file="test-common.xml"/>

  <!-- 初期化が必要なコンポーネント -->
  <component name="initializer"
    class="nablarch.core.repository.initialization.BasicApplicationInitializer">
    <property name="initializeList">
      <list>
        <!-- common/message.xml:文字列リソースのキャッシュ -->
        <component-ref name="stringResourceCache" />
        <!-- common/validation.xml:バリデーション情報のキャッシュ -->
        <component-ref name="formDefinitionCache" />
        <!-- common/validation.xml:バリデーション -->
        <component-ref name="validationManager" />
        <!-- web/handler/permissionCheck.xml:認証機能 -->
        <component-ref name="permissionFactory" />
        <!-- common/date.xml:業務日付コンポーネント -->
        <component-ref name="businessDateProvider" />
        <!-- web/handler/serviceAvailability.xml:サービス提供可否 -->
        <component-ref name="serviceAvailability" />
        <!-- web/code.xml:コードのローダ -->
        <component-ref name="codeLoader" />
        <!-- web/code.xml:コードのキャッシュ -->
        <component-ref name="codeCache" />
        <!--  common/workflow.xml:ワークフローのDAO -->
        <component-ref name="workflowInstanceDao" />
        <!--  common/workflow.xml:ワークフローの定義ホルダー -->
        <component-ref name="workflowDefinitionHolder" />
      </list>
    </property>
  </component>

  <!-- テストイベントリスナー一覧 -->
  <list name="testEventListeners">
    <component class="nablarch.test.RepositoryInitializer"/>
    <component class="please.change.me.sample.WorkflowTableCleaner" />
  </list>

  <!-- エンティティテスト設定 -->
  <component name="entityTestConfiguration" class="nablarch.test.core.entity.EntityTestConfiguration">
    <property name="maxMessageId" value="MSG00024"/>
    <property name="maxAndMinMessageId" value="MSG00011"/>
    <property name="fixLengthMessageId" value="MSG00023"/>
    <property name="underLimitMessageId" value="MSG00011"/>
    <property name="emptyInputMessageId" value="MSG00010"/>
    <property name="characterGenerator">
      <component name="characterGenerator" class="nablarch.test.core.util.generator.BasicJapaneseCharacterGenerator"/>
    </property>
  </component>
</component-configuration>